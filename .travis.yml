language: cpp
compiler:
  - gcc
  - clang
before_install:
  - sudo add-apt-repository --yes ppa:ubuntu-sdk-team/ppa
  - if [ "$CXX" == "g++" ]; then sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test; fi
  - if [ "$CXX" == "clang++" ]; then sudo add-apt-repository -y ppa:h-rayflood/llvm; fi
  - sudo apt-get update -qq
  - sudo apt-get install qt5-default -y
install:
  - if [ "$CXX" = "g++" ]; then sudo apt-get install -qq g++-4.8; fi
  - if [ "$CXX" = "g++" ]; then export CXX="g++-4.8"; fi
  - if [ "$CXX" == "clang++" ]; then sudo apt-get install --allow-unauthenticated -qq clang-3.4; fi
  - if [ "$CXX" == "clang++" ]; then export CXX="clang++-3.4"; fi
before_script:
  - wget http://www.cmake.org/files/v3.0/cmake-3.0.2.tar.gz -O /tmp/cmake.tar.gz
  - pushd .
  - cd /tmp
  - tar xzf cmake.tar.gz
  - cd cmake-3.0.2
  - ./bootstrap && make && sudo make install
  - popd
script:
 - $CXX --version
 - qmake -v
 - cmake . -Denable_tests=ON -DCMAKE_BUILD_TYPE=Debug && make && make test
